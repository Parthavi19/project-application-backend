generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model applications {
  id         Int                  @id @default(autoincrement())
  student_id Int?
  project_id Int?
  status     applications_status? @default(pending)
  applied_at DateTime?            @default(now()) @db.Timestamp(0)
  students   students?            @relation(fields: [student_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "applications_ibfk_1")
  projects   projects?            @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "applications_ibfk_2")

  @@index([project_id], map: "project_id")
  @@index([student_id], map: "student_id")
}

model faculty {
  id         Int        @id @default(autoincrement())
  name       String     @db.VarChar(255)
  email      String     @unique(map: "email") @db.VarChar(255)
  department String     @db.VarChar(100)
  projects   projects[]
}

model projects {
  id              Int            @id @default(autoincrement())
  title           String         @db.VarChar(255)
  description     String         @db.Text
  faculty_id      Int?
  available_slots Int?           @default(1)
  applications    applications[]
  faculty         faculty?       @relation(fields: [faculty_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "projects_ibfk_1")

  @@index([faculty_id], map: "faculty_id")
}

model students {
  id           Int            @id @default(autoincrement())
  name         String         @db.VarChar(255)
  email        String         @unique(map: "email") @db.VarChar(255)
  department   String         @db.VarChar(100)
  applications applications[]
}

enum applications_status {
  pending
  approved
  rejected
}
